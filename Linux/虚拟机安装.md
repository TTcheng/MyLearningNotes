# Virtual Box

## 安装Virtual box

## 虚拟机安装Debian

https://blog.csdn.net/qq_34173277/article/details/109194269

不安装桌面环境，内存配置1G（可随时修改），配置一个8G系统盘（不要分配太多到home目录），配置一个12G数据盘（不用太大，不够可以再添加或者更换）就好了，安装桌面环境的话，内存2G以上，系统盘20G起，60G也不过分

性能优化配置

https://bbs.kafan.cn/thread-2070227-1-1.html

用户密码

root/wcc

jesse/wcc

## 配置国内软件源

```shell
# 注释默认的，修改为以下软件源
deb https://mirrors.aliyun.com/debian stable main contrib non-free 
```

## 配置增强功能

下载VBoxGuestAdditions.iso，一般不用下载，安装目录自带

http://download.virtualbox.org/virtualbox/6.1.18/

安装教程

https://blog.csdn.net/i042416/article/details/82735161

```shell
su root
sudo apt-get install g++ make linux-headers-$(uname -r) 
mkdir /mnt/cdrom
mount /dev/cdrom /mnt/cdrom
cd /mnt/cdrom
./VBoxLinuxAdditions.run
umount /mnt/cdrom
poweroff --reboot 
```

## 命令行分辨率

Virtual Box主机执行

```
E:
cd E:\Program Files\Oracle\VirtualBox
./VBoxManage setextradata global GUI/MaxGuestResolution any
```

debian虚拟机执行

```shell
su root
apt install hwinfo

```

配置完了依然没啥卵用，反正在宿主机通过ssh登陆，这个也不重要。把下一步的网络配置好就行。

## 配置虚拟机网络

​	https://zhuanlan.zhihu.com/p/87075991

### 可能会用到的命令

```shell
sudo apt-get install -y vim
# 查看ip
ip addr show
# 查看网关
ip route show
# 查看dns
cat /etc/resolv.conf
```

### 查看网卡

```shell
dmesg | grep -i eth
```

![image-20210422205339785](%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85.assets/image-20210422205339785.png)

可以看到，enp0s8实际上就是第二个网卡的别名。

补充知识：

> lo代表127.0.0.1，即localhost
>
> eth0，eth1，eth2...... 依次代表网卡一，网卡二，网卡三......

### 配置网络

#### Vitual Box配置

- 配置主机网络

![image-20210422211145268](%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85.assets/image-20210422211145268.png)

- 选中虚拟机 >> 设置 >>网络 >>网卡二 >>选中上图的host only网络





#### 宿主机网络适配器

- 配置ip

![image-20210422211315717](%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85.assets/image-20210422211315717.png)

- 配置网络共享

主机>>网络连接>>物理网卡>>右键属性>>共享>>选择host only网络连接

#### linux网络配置

编辑网络配置文件`/etc/network/interfaces`，然后重启虚拟机

```shell
auto enp0s8
#iface enp0s8 inet dhcp		# 动态获取
iface enp0s8 inet static	# 静态地址
address 192.168.56.102 		# ip地址
netmask 255.255.255.0 		# 子网掩码，等同cidr路由表的/24，即ip的前24个二进制位固定，最后8个二进制位不同的ip属于一个子网
gateway 192.168.56.101						# 填写宿主机host only网卡的ip
dns-nameservers 211.137.96.205 192.168.1.1	#填写宿主机物理网卡使用的dns
```

主机ping不通虚拟机，通常是windows防火墙关闭了ICMP

## 基本配置

### 命令不存在

执行`fdisk -l`报命令不存在，`whereis fdisk`查找到命令在/usr/sbin目录下，这个时候可以确定是环境变量的问题

`vim /etc/profile`把普通用户的环境变量改成和ROOT一致。（vim命令模式yy复制，p粘贴）

```properties
# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))
# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).

if [ "`id -u`" -eq 0 ]; then
  PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
else
  #PATH="/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games"
  PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
fi

```

`source /etc/profile`

### 配置super user权限

```shell
apt install sudo 
chmod u+w /etc/sudoers
vim /etc/sudoers
# jesse ALL=(ALL) ALL
```

### 安装必备软件

```shell
# ssh远程登陆
sudo apt install -y openssh-server
# vim 编辑器
sudo apt install -y vim
# 网络连接工具
sudo apt install -y wget curl
# 解压
sudo apt install -y zip
```



